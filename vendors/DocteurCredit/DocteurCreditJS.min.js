/*! DocteurCreditJS.js 1.0.0.0
 * 
 */
define("DocteurCreditJS",["ss"],function(n){function d(){}function o(){}function g(){}function b(){}function y(){}function t(n,t,i){this.x=0,this.m=0,this.y=0,this.x=n,this.m=t,this.y=i}function r(n){this.$0=n}function nt(){}function h(){}function c(){}function l(){}function e(){var u,n,i,f;for(this.$0=r.$6(r.$7(g.$0,r.$5(y.$0,1+.21)),l.$1),u=new Array(this.$0.$0.length),n=0;n<this.$0.$0.length;n++)i=this.$0.$0[n],f=i.x/1.1,u[n]=new t(f,1-i.m*1.1,-i.y);this.$1=new r(u),this.$2=this.$1.$4()}function s(){var f,u,n,i,e;for(this.$2=r.$6(r.$7(o.get_$7(),r.$5(y.$0,1+.21)),l.$2),f=new r([new t(0,.013*(1+.1),0)]),this.$3=r.$7(this.$2,f),u=new Array(this.$3.$0.length),n=0;n<this.$3.$0.length;n++)i=this.$3.$0[n],e=i.x,u[n]=new t(e,1-i.m,-i.y);this.$4=new r(u),this.$5=this.$4.$4()}function p(){}function v(){}function ht(){}function f(){this.$2=r.$6(r.$5(y.$0,(1+.21)*.25),f.$0)}function lt(){}function u(){}function vt(){this.honoraires=0,this.droitEnregistrement=0,this.salaireRadiation=0,this.fraisDivers=0,this.provision=0}function i(){}function w(){}function k(){}function pt(){this.$0=[]}function a(){this.mensualite=0,this.dureeInitialeMois=0,this.montantInital=0}function kt(){this.ancienDureeRestanteMois=0,this.ancienMensualite=0,this.ancienTauxAn=0,this.dureeMois=0,this.srd=0,this.tauxAn=0,this.fraisIndemnite=0,this.fraisMainLevee=0,this.fraisHypotheque=0,this.mensualite=0,this.capital=0}function gt(n,t,i){this.DurMin=0,this.DurMax=0,this.Rate=0,this.DurMin=n,this.DurMax=t,this.Rate=i}var ii=this,tt,it,rt,ut,ft,et,ot,st,ct,at,yt,wt,bt,dt,ni,ti;return o.$5=function(){for(var i=new Array(21),u=136.72/101.56,n=0;n<=20;n++)i[n]=new t(25e3*n,1e-8,(50+n*17.5)*u);return i[20].m=17.5*u/25e3,new r(i)},o.get_$7=function(){return o.$6==null&&(o.$6=o.$5()),o.$6},tt={},it={},rt={$0:function(n){return this.y+n*this.m}},r.$1=function(n,t){return w.$0(n.x-t)},r.$5=function(n,i){for(var e=new Array(n.$0.length),f,u=0;u<n.$0.length;u++)f=n.$0[u],e[u]=new t(f.x,f.m*i,f.y*i);return new r(e)},r.$6=function(n,i){for(var e=new Array(n.$0.length),f,u=0;u<n.$0.length;u++)f=n.$0[u],e[u]=new t(f.x,f.m,f.y+i);return new r(e)},r.$7=function(n,i){for(var f=new pt,s,e,h,u=0;u<n.$0.length;u++)f.add(n.$0[u].x);for(u=0;u<i.$0.length;u++)s=i.$0[u].x,e=k.$0(f.$0,s,null),e<0&&(e=~e,e===f.get_count()?f.add(s):f.insert(e,s));for(h=new Array(f.get_count()),u=0;u<h.length;u++){var o=f.get_item(u),c=n.$2(o),l=i.$2(o);h[u]=new t(o,c.m+l.m,c.$0(o)+l.$0(o)-(c.m+l.m)*o)}return new r(h)},ut={$2:function(n){var t=k.$0(this.$0,n,r.$1);return t<0?(t=~t)===this.$0.length?this.$0[this.$0.length-1]:t?this.$0[t-1]:this.$0[0]:this.$0[t]},$3:function(n){var t=this.$2(n);return t==null?0:t.$0(n)},$4:function(){for(var u=new Array(this.$0.length),f=w.$0(this.$0[0].m),n,i=0;i<this.$0.length;i++)n=this.$0[i],u[i]=new t(n.$0(n.x),1/n.m,-n.y/n.m);return new r(u)}},nt.getFraisCredit=function(n){return n?c.get_$1():h.get_$1()},h.get_$1=function(){return h.$0==null&&(h.$0=new h),h.$0},ft={getFraisMandat:function(n){return n<1?0:f.get_$4().$2.$3(n)},getFraisOuvertureCredit:function(n){return n<1?0:e.get_$4().$0.$3(n*1.1)},getMontantNet:function(n){return n-this.getFraisOuvertureCredit(n)},getMontantBrut:function(n){return n<=1e-8?n:e.get_$4().$2.$3(n)},getFraisAchat:function(n){return n<1?0:v.$0.$3(n)}},c.get_$1=function(){return c.$0==null&&(c.$0=new c),c.$0},et={getFraisMandat:function(n){return n<1?0:f.get_$4().$2.$3(n)},getMontantNet:function(n){return n-this.getFraisOuvertureCredit(n)},getFraisOuvertureCredit:function(n){return n<1?0:s.get_$7().$3.$3(n)},getMontantBrut:function(n){return n<=1e-8?n:s.get_$7().$5.$3(n)},getFraisAchat:function(n){return n<1?0:v.$1.$3(n)}},e.get_$4=function(){return e.$3==null&&(e.$3=new e),e.$3},ot={},s.get_$7=function(){return s.$6==null&&(s.$6=new s),s.$6},st={},p.getFraisOuvertureCredit=function(n){return n<1?0:e.get_$4().$0.$3(n*1.1)},p.getMontantNet=function(n){return n-p.getFraisOuvertureCredit(n)},p.getMontantBrut=function(n){return n<=1e-8?n:e.get_$4().$2.$3(n)},ht.getFraisAchat=function(n){return n<1?0:v.$0.$3(n)},f.get_$4=function(){return f.$3==null&&(f.$3=new f),f.$3},ct={},lt.getFraisMandat=function(n){return n<1?0:f.get_$4().$2.$3(n)},u.$9=function(t){var i=new vt,r;for(i.droitEnregistrement=25,i.fraisDivers=250,r=u.$6.length-1;r>0&&u.$6[r]>t;)r--;return i.honoraires=u.$8[r]+Math.max(0,t-u.$6[r])*u.$7[r],i.salaireRadiation=102+Math.max(0,n.truncate((t-1)/25e3))*22.08,i.provision=Math.floor((i.droitEnregistrement+i.fraisDivers+i.honoraires+i.salaireRadiation+4.99)/5)*5,i},u.getFraisMainLevee=function(n){return u.$9(n).provision},at={},yt={},i.periodeMoisToIndex=function(n){switch(n){case 1:return 3;case 3:return 2;case 6:return 1;case 12:return 0}return 3},i.getDeltaFromAVL1ermois=function(n,t,i){var r=(i-1)*i/2;return(n-t*i)/r},i.avlTotalAnToDelta=function(n,t,i){return(n*i/12-t)/(i*5.5-(i-1)*i/2)},i.getAVL1ermoisFromDelta=function(n,t,i){var r=(i-1)*i/2,u=(n-t*r)/i;return Math.floor(u*100+.5)/100},i.intPower=function(n,t){for(var i=Math.abs(t),r=1;i>0;){while(!(i&1))i>>=1,n*=n;i--,r*=n}return t<0?1/r:r},i.arrondi=function(n,t){if(t<=11&&t>=0)return n<0?Math.floor(n*i.$0[t]-.5)/i.$0[t]:Math.floor(n*i.$0[t]+.5)/i.$0[t];var r=i.intPower(10,t);return n<0?Math.floor(n*r-.5)/r:Math.floor(n*r+.5)/r},i.tauxAnToPeriodique=function(n,t){return Math.pow(1+n,t/12)-1},i.tauxPeriodiqueToAn=function(n,t){return i.intPower(1+n,12/t)-1},i.calculMensualite=function(n,t){if(t){if(n<=1e-10)return 1/Math.max(t,1);var r=i.intPower(1+n,t);return r*n/(r-1)}return 0},i.calculMensualiteWithCapitalTerme=function(n,t,r){if(t<=0)return(1-r)*(1+n);if(n<=1e-10)return(1-r)/t;var u=i.intPower(1+n,t);return(u-r)*n/(u-1)},i.mensualiteC=function(n,t,i){return i?(t<=5e-6&&(t=5e-6),n*Math.pow(1+t,i)*t/(Math.pow(1+t,i)-1)):0},i.calculDureeWithCapitalTerme=function(n,t,i){try{if(n>1e-8){var r=t-n;return r>1e-8?(r=(t-n*i)/r)>1e-8?Math.log(r)/Math.log(1+n):1:1188}return 1/t}catch(u){return 0}},i.calculDuree=function(n,t){try{if(n>1e-8){var i=1-n/t;return i>1e-8?-Math.log(i)/Math.log(1+n):1188}return 1/t}catch(r){return 0}},i.calculTauxCWithCapitalTerme=function(n,t,r){for(var u=0,f=.2,o=0,e;f-u>1e-6&&o<20;)e=(u+f)*.5,i.calculMensualiteWithCapitalTerme(e,t,r)>n?f=e:u=e,o++;return(u+f)*.5},i.calculTauxC=function(n,t){for(var r=0,u=.2,e=0,f;u-r>1e-6&&e<20;)f=(r+u)*.5,i.calculMensualite(f,t)>n?u=f:r=f,e++;return(r+u)*.5},i.easyStartReportMax=function(n,t,r){if(t<=0||r<=0)return 0;try{var u=i.arrondi(n,i.occhNbrDecTauxMois),f=Math.pow(1+u,t)-1,e=Math.pow(1+u,r),o=Math.pow(1+u,t-r)-1,s=Math.floor(.1*e/(f*(1/o-e/f))*100)/100;return Math.min(i.occhMaxReport,Math.max(0,s))}catch(h){return 0}},i.calculCapitalWithMensualite=function(n,t,r,u){if(r<t){var f=i.intPower(1+n,r)-1;return f>1e-10?f+1-u*f/n:t>0?1-r/t:1}return 0},i.calculCapital=function(n,t,r){if(r<t){var u=i.calculMensualite(n,t);return i.calculCapitalWithMensualite(n,t,r,u)}return 0},i.calculChargeMaxMensCst=function(n,t,r,u,f,e){var o,h,l,c,s;return t<=u||Math.abs(r)<1e-8?i.calculMensualite(n,t):t<=f?n:(o=12/e,h=1,u*e===o?(u>f&&(h=i.calculCapital(n,t-f,u-f)),o*2>f&&(s=r<0||r>.01?.01:r,s=i.tauxAnToPeriodique(s,e),c=n+s,l=Math.min(o,o*2-f),h=h*i.calculCapital(c,t-o-o+l,l)),o*3>f*e&&(s=r<0||r>.02?.02:r,s=i.tauxAnToPeriodique(s,e),c=n+s,l=Math.min(o,o*3-f),h=h*i.calculCapital(c,t-o-o-o+l,l)),s=r<0||r>i.tauxPeriodiqueToAn(n,e)?n:i.tauxAnToPeriodique(r,e),c=n+s,l=t-Math.max(3*o,f),h*i.calculMensualite(c,l)):(u>f&&(h=i.calculCapital(n,t-f,u-f)),s=r<0||r>i.tauxPeriodiqueToAn(n,e)?n:i.tauxAnToPeriodique(r,e),c=n+s,h*i.calculMensualite(c,t-Math.max(u,f))))},w.$0=function(n){return n>0?1:n<0?-1:0},k.$0=function(n,t,i){var r=n.length;if(!r)return-1;for(var e=-1,u=0,f=1;r-e>1;){if(u=r+e>>1,f=i!=null?i(n[u],t):w.$0(n[u]-t),!f)return u;f<0?e=u:r=u}return r===n.length?f>0?~(r-1):~r:e===-1?f<0?-2:-1:~r},wt={add:function(n){this.$0.push(n)},insert:function(n,t){this.$0.splice(n,0,t)},get_count:function(){return this.$0.length},getEnumerator:function(){return n.enumerate(this.$0)},get_item:function(n){return this.$0[n]}},a.$0=function(n,t){var r=n.getDate(),u=n.getMonth(),f=n.getFullYear(),e=t.getDate(),o=t.getMonth(),s=t.getFullYear(),i=(s-f)*12+(o-u);return e<r&&i--,i},a.$1=function(n,t){for(var i=0;t<a.$2(n[i])&&i<n.length;)i++;return i>=n.length?new gt(n[n.length-1].DurMax+1,Number.MAX_VALUE,.2):n[i]},a.$2=function(n){var t=Math.pow(1+n.Rate,1/12)-1;return i.calculMensualite(t,n.DurMax)},bt={calcul:function(t){var l=nt.getFraisCredit(1),r=new kt,f,e;r.ancienMensualite=this.mensualite,r.ancienDureeRestanteMois=this.dureeInitialeMois-a.$0(this.dateDeDebut,n.today()),f=i.calculTauxC(this.mensualite/this.montantInital,this.dureeInitialeMois),r.ancienTauxAn=Math.pow(1+f,12)-1,r.srd=this.mensualite/i.calculMensualite(f,r.ancienDureeRestanteMois),r.fraisIndemnite=r.srd*f*3,r.fraisMainLevee=u.getFraisMainLevee(r.srd),e=r.srd+r.fraisIndemnite+r.fraisMainLevee,r.capital=l.getMontantBrut(e),r.fraisHypotheque=r.capital-e;var s=r.ancienDureeRestanteMois,h=r.ancienMensualite/r.capital,o,c=a.$1(t,h);return o=Math.pow(1+c.Rate,1/12)-1,s=i.calculDuree(o,h),r.tauxAn=c.Rate,r.dureeMois=Math.floor(s+.95),r.mensualite=i.calculMensualite(o,r.dureeMois)*r.capital,r}},dt={get_frais:function(){return this.fraisIndemnite+this.fraisMainLevee+this.fraisHypotheque},get_ancienCoutTotal:function(){return this.ancienDureeRestanteMois*this.ancienMensualite},get_coutTotal:function(){return this.dureeMois*this.mensualite},get_gain:function(){return this.get_ancienCoutTotal()-this.get_coutTotal()}},ni={},ti=n.module("DocteurCreditJS",{DroitsHypo1:[o,tt,null],Droits_Hypo:[g,null,null],Honor_Achat:[b,null,null],Honor_Credit:[y,it,null],Point:[t,rt,null],LigneParMorceau:[r,ut,null],FraisCredit0:[h,ft,null,d],FraisCredit1:[c,et,null,d],FraisGlobal:[l,null,null],FraisOuvertureCreditData:[e,ot,null],FraisOuvertureCreditData1:[s,st,null],FraisAchatData:[v,null,null],FraisMandatUtil:[f,ct,null],MathExt:[w,null,null],ArrayExt:[k,null,null]},{eTypeRemboursement:{mensCst:0,amortCst:1,termeFixe:2,AVL:3,easyStart:4,mensIndexe:5,MVL:6},IndexPeriodeMois:{annuel:0,semestriel:1,trimestriel:2,mensuel:3},IFraisCredit:[d],FraisCreditFactory:[nt,null,null],OldFraisOuvertureCredit:[p,null,null],OldFraisAchat:[ht,null,null],OldFraisMandat:[lt,null,null],FraisMainLevee:[u,at,null],DetailFraisMainLevee:[vt,yt,null],CreditUtil:[i,null,null],BaseList:[pt,wt,null,n.IEnumerable],Input:[a,bt,null],Output:[kt,dt,null],RowTaux:[gt,ni,null]}),g.$0=new r([new t(0,.02865,0),new t(5e3,.013,78.25),new t(12e3,.0117,93.85),new t(12249,.0143,62.0026),new t(22500,.08458,-1519.2974),new t(22749,.0143,79.5023200000001),new t(45250,.086,-3164.92268),new t(45494,.0143,96.9971199999998),new t(68e3,.04938,-2288.44288),new t(68499,.0143,114.502039999999),new t(90500,.04936,-3058.42796),new t(90999,.0143,131.99698),new t(113500,.04938,-3849.58302),new t(113999,.0143,149.5019),new t(136e3,.03182,-2233.2181),new t(136999,.0143,167.00438),new t(159e3,.03181,-2617.08562),new t(159999,.0143,184.496869999999),new t(181e3,.03182,-2986.62313),new t(181999,.0143,201.99935),new t(2e5,.013,461.99935),new t(205e3,.03052,-3129.60065),new t(205999,.013,479.50183),new t(23e4,.03052,-3550.09817),new t(230999,.013,497.00431),new t(255e3,.02,-1287.99569),new t(257499,.013,514.497310000001),new t(279999,.02,-1445.49569),new t(282499,.013,531.997310000001),new t(304999,.02,-1602.99569),new t(307499,.013,549.497310000001),new t(329999,.02,-1760.49569),new t(332499,.013,566.997310000002),new t(354999,.02,-1917.99569),new t(357499,.013,584.497310000002),new t(379999,.02,-2075.49569),new t(382499,.013,601.997310000002),new t(404999,.02,-2232.99569),new t(407499,.013,619.497310000002),new t(429999,.02,-2390.49569),new t(432499,.013,636.997310000002),new t(449999,.01475,-150.500939999998),new t(459999,.013,654.497310000002),new t(479999,.01475,-185.500939999998),new t(489999,.013,671.997310000002),new t(499999,.01475,-203.000939999998),new t(509999,.013,689.497310000002),new t(529999,.01475,-238.000939999998),new t(539999,.013,706.997310000002),new t(549999,.01475,-255.500939999998),new t(559999,.013,724.497310000002),new t(579999,.01475,-290.500939999998),new t(589999,.013,741.997310000002),new t(599999,.01475,-308.000939999998),new t(609999,.013,759.497310000002),new t(629999,.01475,-343.00094),new t(639999,.013,776.997310000001),new t(649999,.01475,-360.50094),new t(659999,.013,794.497310000001),new t(679999,.01475,-395.50094),new t(689999,.013,811.997310000001),new t(7e5,.0137,321.997310000001)]),b.$0=r.$5(new r([new t(0,.0456,0),new t(7500,.0285,128.25),new t(17500,.0228,228),new t(3e4,.0171,399),new t(45495,.0114,658.3215),new t(64095,.0057,1023.663),new t(250095,.00057,2306.65035)]),1),y.$0=r.$5(new r([new t(0,.0171,0),new t(7500,.01368,25.65),new t(17500,.00912,105.45),new t(3e4,.00684,173.85),new t(45495,.00456,277.5786),new t(64095,.00228,423.7152),new t(250095,.000456,879.88848)]),1),l.$1=625*(1+.21),l.$2=800*(1+.21),v.$0=r.$6(r.$5(b.$0,1+.21),l.$1),v.$1=r.$6(r.$5(b.$0,1+.21),l.$2),f.$0=350,u.$6=null,u.$7=null,u.$8=null,function(){var t,n;for(u.$6=[2142.86,7500,17500,3e4,45495,64095,250095],u.$7=[.00399,.00342,.00228,.00171,.00114,.00057,.000228],u.$8=new Array(u.$7.length),t=9,u.$8[0]=t,n=1;n<u.$7.length;n++)t+=(u.$6[n]-u.$6[n-1])*u.$7[n-1],u.$8[n]=t}(),i.occhNbrDecTauxMois=6,i.occhMaxReport=.9,i.periodeMois=[12,6,3,1],i.$0=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11],ti})